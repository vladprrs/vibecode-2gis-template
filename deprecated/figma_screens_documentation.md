# Документация по экранам 2GIS Web Prototype

## Общая архитектура интерфейса

**Ключевая особенность**: Все экраны приложения построены по единой архитектуре — **контент располагается в шторке (bottomsheet) поверх карты**. 

- **Карта** всегда служит фоновым элементом и остается видимой
- **Шторка** содержит весь пользовательский контент и может изменять свою высоту
- **Синхронизация** между картой и содержимым шторки обеспечивает seamless UX

## Общая структура экспорта

Экспорт из Figma содержит 4 основных экрана:
- **Dashboard** — главный экран с дашбордом в шторке
- **Organization (org)** — карточка организации/POI в шторке
- **Search Result** — экран результатов поиска в шторке
- **Suggest** — экран с подсказками при поиске в шторке

Каждый экран содержит:
- `components/` — отдельные переиспользуемые компоненты
- `state_*` — различные состояния экрана (в основном — состояния высоты шторки)
- `examples/` — примеры использования (где применимо)

---

## Архитектура шторки (Bottomsheet)

### Принципы работы:
- **Карта как основа** — всегда остается видимой и интерактивной
- **Шторка как контейнер** — все UI элементы размещаются в драггируемой панели
- **Адаптивная высота** — шторка имеет несколько состояний высоты для разных сценариев

### Состояния высоты шторки:
- **Min/Small** — минимальная высота, максимум карты
- **Mid/Default** — средняя высота, баланс карты и контента  
- **Full/Fullscreen** — максимальная высота, фокус на контенте
- **Fullscreen + Scroll** — полная высота с внутренней прокруткой

### Управление шторкой:
- **Dragger** — элемент для перетаскивания вверх/вниз
- **Snap points** — автоматическое "прилипание" к определенным высотам
- **Gesture-driven** — управление жестами свайпа

---

## 1. Dashboard (Главный экран в шторке)

### Состояния шторки:
- `state_default` — средняя высота, видны основные блоки
- `state_small` — минимальная высота, только поисковая строка
- `state_fullscreen` — полная высота экрана
- `state_fullscreen_scroll` — полная высота с прокруткой контента

### Ключевые компоненты:

#### Структура шторки:
- **`bottomsheet`** — контейнер всего контента дашборда
- **`bottomsheet_header`** — заголовок шторки с поисковой строкой и драггером
- **`button_row`** и **`button_row_on_map`** — горизонтальные ряды кнопок

#### Содержимое шторки:
- **`meta_item`**, **`meta_item_ad`**, **`meta_item_rubric`** — карточки ведущие на категорию или рубрику
- **`stories`** и **`story`** — блок историй и отдельная история
- **`cover`** и **`cover_big`** — карточки с изображениями (коллекции, гиды)
- **`promo`** — промо-блоки
- **`banner`** — рекламные баннеры
- **`RD`** — блок организации-рекламодателя

### UX/UI особенности:
- **Адаптивная высота** — три состояния высоты (snap points): min/mid/full
- **Фоновая карта** — всегда видна, степень видимости зависит от высоты шторки
- **Поисковая строка** — всегда доступна в заголовке шторки
- **Горизонтальная прокрутка** — для Stories и кнопок внутри шторки
- **Элементы управления картой** — расположены поверх карты, не в шторке

---

## 2. Organization/POI Card (Карточка организации в шторке)

### Состояния шторки:
- `state_advertiser` — карточка рекламодателя, стандартная высота
- `state_advertiser_fullscreen` — полноэкранная карточка рекламодателя  
- `state_not_advertiser` — обычная карточка организации, стандартная высота
- `state_not_advertiser_fullscreen` — полноэкранная обычная карточка

### Ключевые компоненты:

#### Структура шторки:
- **`header_advertiser`** / **`header_not_advertiser`** — заголовки шторки в зависимости от типа
- **`actionbar`** и **`actionbar_full`** — панели действий в нижней части шторки
- **`tabbar`** — табы для переключения контента (Обзор, Меню, Фото, Отзывы, Инфо, Акции)

#### Содержимое шторки:
- **`about`** — информация о компании
- **`adress`** — адрес и местоположение
- **`contacts`** — контактная информация
- **`worktime`** — часы работы
- **`menu`** — меню компании
- **`feedback`** — отзывы
- **`friends`** — активность друзей

#### Дополнительные элементы в шторке:
- **`alert`** — уведомления (временно закрыто, и т.д.)
- **`branch`** — информация о филиалах
- **`discounts`** — акции и скидки
- **`info`** — дополнительная информация
- **`content`** — основной контент
- **`items_and_utilities`** — услуги и товары

### UX/UI особенности:
- **Синхронизация с картой** — пин организации выделен на фоновой карте
- **Драггер для управления** — возможность изменить высоту шторки
- **Фотогалерея в шторке** — горизонтальная прокрутка изображений
- **Табы внутри шторки** — переключение контента без изменения высоты
- **Быстрые действия** — кнопки в нижней части шторки

---

## 3. Search Result (Результаты поиска в шторке)

### Состояния шторки:
- `state_default` — список результатов, средняя высота
- `state_fullscreen` — полноэкранный режим с результатами
- `state_fullscreen_scroll` — полноэкранный с прокруткой списка

### Ключевые компоненты:

#### Структура шторки:
- **`bottomsheet_header`** — заголовок шторки с поисковой строкой
- **`results`** и **`results_content`** — контейнеры результатов внутри шторки
- **`filters`** — панель фильтров в верхней части шторки
- **`banner`** — баннеры между результатами

#### Типы карточек в шторке:
- **`card_advertiser`** — карточки рекламодателей
- **`card_advertiser_example`** — примеры карточек рекламодателей
- **`card_non_advertiser`** — обычные карточки организаций
- **`card_not_advertiser_ZMK`** — специальные карточки для ЗМК

#### Дополнительные элементы:
- **`ZMK_button`** — кнопки для функций ЗМК (заказ такси, и т.д.)

### UX/UI особенности:
- **Синхронизация карточек с пинами** — выбранная карточка подсвечивается на карте
- **Фильтры в шторке** — горизонтальная прокрутка фильтров
- **Список результатов** — вертикальная прокрутка внутри шторки
- **Интеграция рекламных блоков** — баннеры между результатами поиска

---

## 4. Suggest (Подсказки поиска в шторке)

### Состояния шторки:
- `state_default` — список подсказок в шторке средней высоты

### Ключевые компоненты:
- **`bottomsheet`** — контейнер подсказок в шторке
- **`bottomsheet_header`** — заголовок с активной поисковой строкой

### UX/UI особенности:
- **Активная поисковая строка** — в фокусе, с клавиатурой
- **Список подсказок** — различные типы: история поиска, популярные запросы, организации
- **Дополнительная информация** — адрес, количество филиалов отображаются в шторке
- **Фоновая карта** — остается видимой и может показывать релевантные пины

---

## Общие UI паттерны

### Компоненты интерфейса:
- **Text blocks** — различные стили текста (Body, H4, Footnote, Caption)
- **Smart buttons** — адаптивные кнопки разных размеров
- **Icon containers** — контейнеры для иконок (16, 24 px)
- **Photo items** — элементы фотогалерей разных размеров
- **Content rows** — универсальные строки контента

### Состояния интерфейса:
- **Active/Inactive** — активные и неактивные состояния
- **Different sizes** — адаптация под разные размеры экранов

### Навигационные элементы:
- **Bottom tab bar** — нижняя панель навигации (внутри шторки)
- **Status bar** — статус-бар устройства (поверх всего)
- **Map controls** — элементы управления картой (поверх карты, вне шторки)
- **Dragger** — элемент для перетаскивания шторки

---

## Пользовательские флоу и взаимодействие

### Основные пользовательские сценарии:

#### 1. Поиск и навигация:
```
Dashboard (шторка) → [клик на поисковую строку] → Suggest (шторка) → [выбор подсказки] → Search Result (шторка) → [клик на карточку] → Organization Card (шторка)
```

#### 2. Исследование контента:
```
Dashboard (шторка) → [пролистывание Stories] → [клик на Story] → Отдельная история (шторка)
Dashboard (шторка) → [пролистывание Meta Items] → [клик на категорию] → Search Result (шторка)
```

#### 3. Взаимодействие с картой:
```
Dashboard (шторка min state) → [перетаскивание карты] → [клик на пин] → Organization Card (шторка)
Search Result (шторка) → [клик на карточку] → Синхронизация с пином на карте
```

### Состояния шторки и переходы:

#### Универсальные состояния шторки:
- **Min/Small** — минимальная высота, максимум карты видно
- **Default/Mid** — средняя высота, баланс контента и карты
- **Full/Fullscreen** — полная высота, фокус на контенте в шторке
- **Fullscreen + Scroll** — полная высота с внутренней прокруткой

#### Переходы между состояниями шторки:
- **Свайп вверх/вниз** по драггеру
- **Автоматический переход** при взаимодействии с контентом
- **Snap points** — автоматическое "прилипание" к определенным высотам
- **Клик по поисковой строке** автоматически разворачивает шторку

### Интерактивные элементы:

#### Карта (фон под шторкой):
- **Всегда видима** — степень видимости зависит от высоты шторки
- **Интерактивная** — зуммирование, перетаскивание даже когда шторка открыта
- **Синхронизация с контентом** — пины соответствуют содержимому шторки
- **Элементы управления** — расположены поверх карты, не в шторке

#### Шторка (основной контейнер):
- **Драггируемая** — можно изменять высоту жестами
- **Контейнер контента** — весь UI находится внутри шторки
- **Адаптивная** — содержимое подстраивается под высоту шторки
- **Прокручиваемая** — внутренняя прокрутка в полноэкранном режиме

#### Поисковая строка (в заголовке шторки):
- **Всегда доступна** — находится в header шторки
- **Неактивная** — показывает плейсхолдер "Поиск в Москве"
- **Активная** — фокус с клавиатурой, переход к Suggest в шторке
- **Заполненная** — показывает запрос с возможностью очистки

---

## Технические особенности

### Адаптивность:
- Различные размеры viewport

### Состояния компонентов:
- Множественные варианты каждого компонента
- Системы пропсов для настройки

### Интеграция шторки и карты:
- **Карта как фоновый элемент** — всегда рендерится под шторкой
- **Единая система компонентов** — все элементы интерфейса в шторке
- **Консистентная типографика и цветовая схема** — единый дизайн-система

### Анимации и переходы:
- **Плавные переходы высоты шторки** — анимированное изменение состояний
- **Синхронизированные анимации** — карта и содержимое шторки
- **Анимации появления/скрытия** — элементы внутри шторки

---

## Заключение

Экспорт из Figma демонстрирует продуманную архитектуру мобильного веб-приложения с **единой концепцией шторки поверх карты**:

1. **Универсальная архитектура шторки** — все экраны используют одинаковый принцип размещения контента
2. **Интеграция карты и UI** — карта всегда остается видимой и интерактивной фоном
3. **Гибкая система высот** — адаптивные состояния шторки для разных сценариев  
4. **Консистентная компонентная база** — переиспользуемые элементы внутри шторки
5. **Gesture-driven UX** — управление высотой шторки жестами для естественного взаимодействия

Такая архитектура обеспечивает:
- **Seamless пользовательский опыт** — плавные переходы между режимами
- **Эффективное использование пространства** — баланс между картой и контентом
- **Консистентность интерфейса** — единые принципы взаимодействия на всех экранах

Структура готова для реализации с использованием современных фронтенд-фреймворков с упором на производительность и мобильный UX. 