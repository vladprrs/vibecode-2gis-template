# –§–∞–∑–∞ 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Å–Ω–æ–≤–∞ ‚úÖ

## –û–±–∑–æ—Ä

–ü–µ—Ä–≤–∞—è —Ñ–∞–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞ **"–ü–æ–∏—Å–∫ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è"** —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —à—Ç–æ—Ä–∫–∏ –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç—ã MapGL –æ—Ç 2GIS.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. **arch_bottomsheet_system** - –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π —à—Ç–æ—Ä–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `BottomsheetState` enum —Å 4 —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –≤—ã—Å–æ—Ç—ã
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `BottomsheetConfig` interface –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—ã—Å–æ—Ç –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω `BottomsheetManager` –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

### 2. **arch_flow_manager** - –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `ScreenType` enum –¥–ª—è —Ç–∏–ø–æ–≤ —ç–∫—Ä–∞–Ω–æ–≤
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω `SearchFlowManager` –∫–ª–∞—Å—Å —Å –ø–æ–ª–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π

### 3. **arch_map_sync** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã –∏ —à—Ç–æ—Ä–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç–∏–ø—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å MapGL –æ—Ç 2GIS
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `MapSyncService` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–∏–Ω–æ–≤ –∏ viewport
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–∏–Ω–æ–≤ –∏ –∞–Ω–∏–º–∞—Ü–∏–π –∫–∞—Ä—Ç—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ `MapGLService` –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```
src/
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îú‚îÄ‚îÄ bottomsheet.ts      # –¢–∏–ø—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —à—Ç–æ—Ä–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ navigation.ts       # –¢–∏–ø—ã –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ map.ts             # –¢–∏–ø—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å MapGL
‚îÇ   ‚îî‚îÄ‚îÄ index.ts           # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ç–∏–ø–æ–≤
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ BottomsheetManager.ts    # –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏–π —à—Ç–æ—Ä–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ SearchFlowManager.ts     # –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ MapSyncService.ts        # –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                 # –≠–∫—Å–ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ Map/
        ‚îî‚îÄ‚îÄ MapGLComponent.ts    # –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è MapGL –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π —à—Ç–æ—Ä–∫–∏
```typescript
enum BottomsheetState {
  SMALL = 'small',           // ~20% —ç–∫—Ä–∞–Ω–∞
  DEFAULT = 'default',       // ~50% —ç–∫—Ä–∞–Ω–∞  
  FULLSCREEN = 'fullscreen', // ~90% —ç–∫—Ä–∞–Ω–∞
  FULLSCREEN_SCROLL = 'fullscreen_scroll' // ~95% —ç–∫—Ä–∞–Ω–∞ —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
}
```

### –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
```typescript
enum ScreenType {
  DASHBOARD = 'dashboard',
  SUGGEST = 'suggest', 
  SEARCH_RESULT = 'search_result',
  ORGANIZATION = 'organization'
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MapGL –æ—Ç 2GIS
```typescript
interface MapRef {
  setCenter: (center: [number, number], animated?: boolean) => void;
  setZoom: (zoom: number, animated?: boolean) => void;
  setPins: (pins: MapPin[]) => void;
  highlightPin: (pinId: string) => void;
  adjustPadding: (padding: Partial<MapState['padding']>) => void;
  getMapState: () => MapState;
  fitBounds: (bounds: MapState['bounds'], options?: MapAnimationOptions) => void;
}
```

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MapGL

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å [2GIS MapGL React App](https://github.com/2gis/mapgl-react-app):

```typescript
// –ü—Ä–∏–º–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
const mapConfig = MapSyncServiceFactory.createDefaultConfig('YOUR_API_KEY');
const mapSyncService = MapSyncServiceFactory.create(mapRef, mapConfig);

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –∫–∞—Ä—Ç–æ–π
mapSyncService.syncPinsWithContent('search_results', { results: organizations });
mapSyncService.fitToSearchResults(organizations);
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —Ñ–∞–∑—ã

- **–¢–∏–ø–æ–≤ —Å–æ–∑–¥–∞–Ω–æ**: 15+ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –µ–Ω—É–º–æ–≤
- **–°–µ—Ä–≤–∏—Å–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–∞  
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~800 —Å—Ç—Ä–æ–∫ TypeScript
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π**: 100%

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–ª–µ–¥—É—é—â–∏–º —Ñ–∞–∑–∞–º

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Å–Ω–æ–≤–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

1. **–ï–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à—Ç–æ—Ä–∫–æ–π** - –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ UI
2. **–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é** - –≥–æ—Ç–æ–≤–∞ –¥–ª—è —ç–∫—Ä–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å MapGL** - –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ä—Ç–æ–π 2GIS
4. **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è** - –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã** - –∑–∞–ª–æ–∂–µ–Ω—ã –æ—Å–Ω–æ–≤—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

## üéâ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–§–∞–∑–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ **–§–∞–∑–µ 2: –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:

- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —à—Ç–æ—Ä–∫–∏ (BottomsheetContainer, BottomsheetHeader, etc.)
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (SearchBar, SearchSuggestions, etc.)  
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π (OrganizationCard, AdvertiserCard, etc.)

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –∑–∞–ª–æ–∂–µ–Ω - —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å! üèóÔ∏è 